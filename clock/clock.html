
<canvas id="canvas-0" width="1440" height="256"></canvas>

<script src="../js/window.audiocontext.js"></script>
<script src="../js/navigator.getusermedia.js"></script>
<script src="../js/object.setprototypeof.js"></script>

<script src="../modules/object.assign/object.assign.js"></script>
<script src="../modules/fn/js/fn.js"></script>

<script src="../modules/audio-object/js/audio-object.js"></script>
<script src="../modules/audio-object/js/audio-object-oscillator.js"></script>
<script src="js/clock.js"></script>
<script src="js/head.js"></script>

<script src="test/data.js"></script>
<script src="test/canvas.js"></script>

<style>
	html,
	body {
		margin: 0;
		padding: 0;
		-webkit-overflow-scrolling: auto;
	}

	canvas {
		display: block;
		width: 1440px;
	}
</style>

<script>
	var Clock = window.Clock;
	var audio = new window.AudioContext();

	var oscillator = new AudioObject.Oscillator(audio, {
		frequency: 200,
		waveform: 'square',
		gain: 0.0625
	});

	//oscillator.gain = 0.0625;

	var output = AudioObject.getOutput(oscillator);
	output.connect(audio.destination);

	var clock = new Clock(audio, sequence);
	var n = 0;

	clock.requestCue(function cue(time) {
		// Make the test run for 3 seconds only
		if (audio.currentTime > 6) { return; }
		graph.drawCue(audio.currentTime, time);
		clock.requestCue(cue);
	});

	document.addEventListener('visibilitychange', function(e) {
		graph.drawBar(audio.currentTime, '#cc6622');
	});

	var head = Head(clock, sequence);

	setTimeout(function() {
		clock.start();
		graph.drawBar(clock.beatToTime(0));

		setTimeout(function() {
			head.start(audio.currentTime);
			graph.drawBar(audio.currentTime);
		}, 400);
		
	}, 400);

</script>
