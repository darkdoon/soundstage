<script src="soundstage/modules/collection/js/object.assign.js"></script>
<script src="soundstage/modules/collection/js/observe.js"></script>
<script src="soundstage/modules/collection/js/mixin.array.js"></script>
<script src="soundstage/modules/collection/js/mixin.events.js"></script>
<script src="soundstage/modules/collection/js/collection.js"></script>
<script src="soundstage/modules/audio-object/js/audio-object.js"></script>
<script src="soundstage/modules/midi/js/midi.js"></script>
<script src="soundstage/modules/midi/js/midi-utils.js"></script>
<script src="soundstage/modules/clock/js/clock.js"></script>

<script src="soundstage/js/window.audiocontext.js"></script>
<script src="soundstage/js/navigator.getusermedia.js"></script>
<script src="soundstage/js/soundstage.js"></script>
<script src="soundstage/js/soundstage.midi.js"></script>
<script src="soundstage/js/soundstage.objects.js"></script>
<script src="soundstage/js/soundstage.input.js"></script>
<script src="soundstage/js/soundstage.output.js"></script>
<script src="soundstage/js/soundstage.track.js"></script>
<script src="soundstage/js/soundstage.send.js"></script>
<script src="soundstage/js/soundstage.filter.js"></script>
<script src="soundstage/js/soundstage.flange.js"></script>
<script src="soundstage/js/soundstage.gain.js"></script>
<script src="soundstage/js/soundstage.loop.js"></script>
<script src="soundstage/js/soundstage.sampler.js"></script>
<script src="soundstage/js/soundstage.saturate.js"></script>
<script src="soundstage/js/soundstage.compress.js"></script>
<script src="soundstage/js/soundstage.envelope.js"></script>
<script src="soundstage/js/soundstage.tone-synth.js"></script>
<script src="src/sequencer.js"></script>

<script>
(function(window) {
    "use strict";
    var soundio = window.Soundio({
        objects: [
            {id: 1, type: "tone-synth"},
            {id: 2, type: "output"}
        ],

        connections: [
            {source: 1, destination: 2}
        ]
    });

    var osc = soundio.find(1);
    var clock = soundio.clock;
    console.log('clock', clock);
    var seq = new Sequencer(osc, clock);
    console.log(seq);
    var music = {
        "sequence": [
            [2,   "note", 76, 0.8, 0.5],
            [2.5, "note", 77, 0.6, 0.5],
            [3,   "note", 79, 1, 0.5],
            [3.5, "note", 74, 1, 3.5],
            [10,  "note", 76, 1, 0.5],
            [0, "chord", "C", "âˆ†7", 4],
            [4, "chord", "G", "-7", 4]
        ],

        "interpretation": {
            "time_signature": "4/4",
            "key": "C",
            "transpose": 0
        }
    };

    console.log(music);
    seq.play(music);
    window.soundio = soundio;
    window.osc = osc;
})(window);
</script>
